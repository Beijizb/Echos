# âœ… æœ¬åœ°æºé›†æˆå®Œæˆ

## å·²å®Œæˆçš„ä¿®æ”¹

### 1. `url_service.dart` - æ·»åŠ æœ¬åœ°æºæ”¯æŒ

#### ä¿®æ”¹å†…å®¹ï¼š
- âœ… åœ¨ `BackendSourceType` æšä¸¾ä¸­æ·»åŠ  `local` ç±»å‹
- âœ… æ·»åŠ  `localBaseUrl = 'http://localhost:3000'` å¸¸é‡
- âœ… åœ¨ `baseUrl` getter ä¸­æ·»åŠ  local åˆ†æ”¯
- âœ… æ·»åŠ  `useLocalSource()` æ–¹æ³•
- âœ… æ›´æ–° `getSourceDescription()` æ–¹æ³•

```dart
enum BackendSourceType {
  official, // å®˜æ–¹æº
  local,    // æœ¬åœ°æº âœ… æ–°å¢
  custom,   // è‡ªå®šä¹‰æº
}

static const String localBaseUrl = 'http://localhost:3000'; // âœ… æ–°å¢

String get baseUrl {
  switch (_sourceType) {
    case BackendSourceType.official:
      return officialBaseUrl;
    case BackendSourceType.local:
      return localBaseUrl; // âœ… æ–°å¢
    case BackendSourceType.custom:
      return _customBaseUrl.isNotEmpty ? _customBaseUrl : officialBaseUrl;
  }
}

void useLocalSource() { // âœ… æ–°å¢
  setSourceType(BackendSourceType.local);
}
```

### 2. `network_settings.dart` - æ·»åŠ æœ¬åœ°æºUIé€‰é¡¹

#### ä¿®æ”¹å†…å®¹ï¼š
- âœ… Material Design å¯¹è¯æ¡†æ·»åŠ æœ¬åœ°æºé€‰é¡¹
- âœ… Fluent UI å¯¹è¯æ¡†æ·»åŠ æœ¬åœ°æºé€‰é¡¹
- âœ… Cupertino å¯¹è¯æ¡†æ·»åŠ æœ¬åœ°æºé€‰é¡¹

#### Material Design (Android/Linux):
```dart
RadioListTile<BackendSourceType>(
  title: const Text('æœ¬åœ°æº'),
  subtitle: Text('http://localhost:3000'),
  value: BackendSourceType.local,
  groupValue: UrlService().sourceType,
  onChanged: (value) {
    UrlService().useLocalSource();
    Navigator.pop(context);
    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(content: Text('å·²åˆ‡æ¢åˆ°æœ¬åœ°æº')),
    );
  },
),
```

#### Fluent UI (Windows):
```dart
fluent_ui.RadioButton(
  content: Column(
    crossAxisAlignment: CrossAxisAlignment.start,
    children: [
      const Text('æœ¬åœ°æº'),
      Text('http://localhost:3000'),
    ],
  ),
  checked: UrlService().sourceType == BackendSourceType.local,
  onChanged: (v) {
    UrlService().useLocalSource();
    Navigator.pop(context);
  },
),
```

#### Cupertino (iOS/macOS):
```dart
CupertinoActionSheetAction(
  onPressed: () {
    UrlService().useLocalSource();
    Navigator.pop(context);
  },
  child: Row(
    mainAxisAlignment: MainAxisAlignment.center,
    children: [
      if (UrlService().sourceType == BackendSourceType.local)
        const Icon(CupertinoIcons.checkmark, size: 18),
      const Text('æœ¬åœ°æº'),
      const Text('localhost:3000'),
    ],
  ),
),
```

## ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœ¬åœ° API æœåŠ¡å™¨

```bash
cd "D:\test\api æ¥å£\multiPlatformMusicApi"
node app.js
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

### 2. åœ¨ os åº”ç”¨ä¸­åˆ‡æ¢åˆ°æœ¬åœ°æº

#### Windows (Fluent UI):
1. æ‰“å¼€åº”ç”¨
2. ç‚¹å‡»å·¦ä¾§èœå• "è®¾ç½®"
3. æ‰¾åˆ° "ç½‘ç»œ" éƒ¨åˆ†
4. ç‚¹å‡» "åç«¯æº"
5. é€‰æ‹© "æœ¬åœ°æº"
6. å®Œæˆï¼

#### Android/Linux (Material Design):
1. æ‰“å¼€åº”ç”¨
2. è¿›å…¥ "è®¾ç½®"
3. æ‰¾åˆ° "ç½‘ç»œè®¾ç½®"
4. ç‚¹å‡» "åç«¯æº"
5. é€‰æ‹© "æœ¬åœ°æº"
6. ä¼šæ˜¾ç¤ºæç¤º "å·²åˆ‡æ¢åˆ°æœ¬åœ°æº"

#### iOS/macOS (Cupertino):
1. æ‰“å¼€åº”ç”¨
2. è¿›å…¥ "è®¾ç½®"
3. æ‰¾åˆ° "ç½‘ç»œ"
4. ç‚¹å‡» "åç«¯æº"
5. åœ¨å¼¹å‡ºçš„æ“ä½œè¡¨ä¸­é€‰æ‹© "æœ¬åœ°æº"
6. å®Œæˆï¼

### 3. éªŒè¯è¿æ¥

åˆ‡æ¢åˆ°æœ¬åœ°æºåï¼Œåº”ç”¨ä¼šè‡ªåŠ¨ï¼š
- æµ‹è¯•ä¸æœ¬åœ°æœåŠ¡å™¨çš„è¿æ¥
- æ˜¾ç¤ºå»¶è¿Ÿï¼ˆåº”è¯¥å¾ˆä½ï¼Œé€šå¸¸ < 10msï¼‰
- å¦‚æœè¿æ¥å¤±è´¥ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯æç¤º

## æ”¯æŒçš„åŠŸèƒ½

ä½¿ç”¨æœ¬åœ°æºæ—¶ï¼Œä»¥ä¸‹åŠŸèƒ½å®Œå…¨å¯ç”¨ï¼š

### âœ… ç½‘æ˜“äº‘éŸ³ä¹
- æœç´¢æ­Œæ›²
- è·å–æ­Œæ›²æ’­æ”¾é“¾æ¥
- æ¦œå•åˆ—è¡¨
- æ¯æ—¥æ¨èæ­Œæ›²
- æ¯æ—¥æ¨èæ­Œå•
- ç§äºº FM
- ä¸“å±æ­Œå•
- èšåˆæ¨èæ¥å£
- æ­Œå•è¯¦æƒ…

### âœ… QQéŸ³ä¹
- æœç´¢æ­Œæ›²
- è·å–æ­Œæ›²æ’­æ”¾é“¾æ¥

### âœ… é…·ç‹—éŸ³ä¹
- æœç´¢æ­Œæ›²
- è·å–æ­Œæ›²æ’­æ”¾é“¾æ¥

### âœ… é…·æˆ‘éŸ³ä¹
- æœç´¢æ­Œæ›²
- è·å–æ­Œæ›²æ’­æ”¾é“¾æ¥

## ä¼˜åŠ¿

### ğŸš€ æ€§èƒ½
- **æä½å»¶è¿Ÿ**ï¼šæœ¬åœ°ç½‘ç»œï¼Œé€šå¸¸ < 10ms
- **å¿«é€Ÿå“åº”**ï¼šæ— éœ€ç»è¿‡äº’è”ç½‘
- **ç¨³å®šè¿æ¥**ï¼šä¸å—ç½‘ç»œæ³¢åŠ¨å½±å“

### ğŸ”’ éšç§
- **æ•°æ®æœ¬åœ°åŒ–**ï¼šæ‰€æœ‰è¯·æ±‚åœ¨æœ¬åœ°å¤„ç†
- **æ— éœ€ä¸Šä¼ **ï¼šä¸ä¼šå°†æ•°æ®å‘é€åˆ°äº‘ç«¯
- **å®Œå…¨æ§åˆ¶**ï¼šæ‚¨æŒæ§æ‰€æœ‰æ•°æ®

### ğŸ› ï¸ å¼€å‘
- **æ˜“äºè°ƒè¯•**ï¼šå¯ä»¥ç›´æ¥æŸ¥çœ‹å’Œä¿®æ”¹ API ä»£ç 
- **è‡ªå®šä¹‰æ‰©å±•**ï¼šå¯ä»¥æ·»åŠ è‡ªå·±çš„åŠŸèƒ½
- **ç¦»çº¿ä½¿ç”¨**ï¼šæ— éœ€äº’è”ç½‘è¿æ¥ï¼ˆéŸ³ä¹å¹³å°é™¤å¤–ï¼‰

## æ³¨æ„äº‹é¡¹

### âš ï¸ å¿…é¡»ä¿æŒ API æœåŠ¡å™¨è¿è¡Œ
ä½¿ç”¨æœ¬åœ°æºæ—¶ï¼Œå¿…é¡»ä¿æŒ multiPlatformMusicApi æœåŠ¡å™¨è¿è¡Œã€‚å¦‚æœæœåŠ¡å™¨åœæ­¢ï¼Œåº”ç”¨å°†æ— æ³•è·å–éŸ³ä¹æ•°æ®ã€‚

### âš ï¸ ç«¯å£å ç”¨
ç¡®ä¿ 3000 ç«¯å£æœªè¢«å…¶ä»–ç¨‹åºå ç”¨ã€‚å¦‚æœéœ€è¦æ›´æ”¹ç«¯å£ï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹ï¼š
1. API æœåŠ¡å™¨çš„ç«¯å£é…ç½®
2. os é¡¹ç›®ä¸­çš„ `localBaseUrl` å¸¸é‡

### âš ï¸ ç§»åŠ¨è®¾å¤‡ä½¿ç”¨
å¦‚æœåœ¨ç§»åŠ¨è®¾å¤‡ï¼ˆAndroid/iOSï¼‰ä¸Šä½¿ç”¨æœ¬åœ°æºï¼š
1. ç¡®ä¿ç§»åŠ¨è®¾å¤‡ä¸è¿è¡Œ API æœåŠ¡å™¨çš„ç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘
2. å°† `localhost` æ”¹ä¸ºç”µè„‘çš„å±€åŸŸç½‘ IP åœ°å€
3. ä¾‹å¦‚ï¼š`http://192.168.1.100:3000`

### âš ï¸ ç™»å½•åŠŸèƒ½
éƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚æ¯æ—¥æ¨èï¼‰éœ€è¦ç™»å½•ï¼Œæœ¬åœ°æºæš‚ä¸æ”¯æŒç™»å½•æ¥å£ã€‚è¿™äº›åŠŸèƒ½å¯èƒ½è¿”å›ç©ºæ•°æ®ã€‚

## æµ‹è¯•æ¸…å•

- [ ] å¯åŠ¨æœ¬åœ° API æœåŠ¡å™¨
- [ ] åœ¨ os åº”ç”¨ä¸­åˆ‡æ¢åˆ°æœ¬åœ°æº
- [ ] æµ‹è¯•æœç´¢åŠŸèƒ½
- [ ] æµ‹è¯•æ’­æ”¾éŸ³ä¹
- [ ] æµ‹è¯•æ¦œå•åŠŸèƒ½
- [ ] æµ‹è¯•æ¨èåŠŸèƒ½
- [ ] æ£€æŸ¥è¿æ¥å»¶è¿Ÿ
- [ ] éªŒè¯æ‰€æœ‰å¹³å°ï¼ˆç½‘æ˜“äº‘ã€QQã€é…·ç‹—ã€é…·æˆ‘ï¼‰

## æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ— æ³•è¿æ¥åˆ°æœ¬åœ°æº
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ API æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
2. è®¿é—® http://localhost:3000/health éªŒè¯æœåŠ¡å™¨çŠ¶æ€
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
4. ç¡®è®¤ç«¯å£ 3000 æœªè¢«å ç”¨

### é—®é¢˜ï¼šæœç´¢è¿”å›ç©ºç»“æœ
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ API æœåŠ¡å™¨æ—¥å¿—
2. ç¡®è®¤éŸ³ä¹å¹³å° API æ­£å¸¸å·¥ä½œ
3. å°è¯•ä½¿ç”¨å®˜æ–¹æºå¯¹æ¯”

### é—®é¢˜ï¼šæ’­æ”¾å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ­Œæ›² URL æ˜¯å¦æ­£ç¡®è·å–
2. æŸ¥çœ‹ API æœåŠ¡å™¨æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤éŸ³ä¹å¹³å°æ²¡æœ‰é™åˆ¶

## ä¸‹ä¸€æ­¥è®¡åˆ’

- [ ] æ·»åŠ ç™»å½•æ¥å£æ”¯æŒ
- [ ] æ·»åŠ è´¦å·ç»‘å®šåŠŸèƒ½
- [ ] æ·»åŠ ç”¨æˆ·æ­Œå•åŒæ­¥
- [ ] ä¼˜åŒ–é”™è¯¯å¤„ç†
- [ ] æ·»åŠ ç¼“å­˜æœºåˆ¶
- [ ] æ”¯æŒ HTTPS

## æ€»ç»“

âœ… æœ¬åœ°æºé›†æˆå·²å®Œæˆï¼
âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²æ”¯æŒï¼
âœ… ä¸‰ç§ UI æ¡†æ¶ï¼ˆMaterialã€Fluentã€Cupertinoï¼‰éƒ½å·²é€‚é…ï¼

ç°åœ¨æ‚¨å¯ä»¥äº«å—æœ¬åœ° API å¸¦æ¥çš„é€Ÿåº¦å’Œéšç§ä¼˜åŠ¿äº†ï¼ğŸ‰
